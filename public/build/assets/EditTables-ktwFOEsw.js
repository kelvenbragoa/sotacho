import{s as W}from"./index-BVhdwYF6.js";import{s as A}from"./index-B8j82Sw8.js";import{s as O}from"./index-BkBcl6jt.js";import{s as Q}from"./index-DRlvieUk.js";import{u as G,r as s,w as H,o as J,c as _,a,b as o,e as k,g as t,l as F,n as T,t as E,j as K,i as X,F as Y,k as Z,f as v,d as ee}from"./app-BTf9-ai_.js";import{u as ae}from"./vee-validate-DBzbbpv2.js";import{d as se}from"./moment-CQ1ixRO1.js";import{c as te,a as P}from"./index.esm-CQT6nZnd.js";import"./index-C0ODo9Cv.js";import"./index-CQKq0pW0.js";import"./index-CFeuG2SP.js";const le={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},oe={class:"w-full"},ie={class:"flex flex-col gap-4 text-center"},re={key:1,class:"flex flex-col md:flex-row gap-12"},ne={class:"w-full"},ce={class:"card flex flex-col gap-4"},de={class:"w-full"},ue={class:"flex flex-col gap-2"},me={id:"name-help",class:"p-error"},pe={class:"flex flex-col gap-2"},fe={id:"capacity-help",class:"p-error"},$e={__name:"EditTables",setup(ve){const r=Z(),n=G();s(null);const y=s(!0),g=s(!1);let C=s(null);const S=s(""),c=s(null),j=s(1);s(15),s(0);const b=s(!1);s(null);const d=s(!1),q=te({name:P().required().trim().label("name"),capacity:P().required().trim().label("capacity")}),{defineField:x,handleSubmit:R,resetForm:ye,errors:u,setErrors:U}=ae({validationSchema:q}),[m]=x("name"),[p]=x("capacity"),[z]=x("_method"),V=s();function w(){r&&r.back()}const D=()=>{b.value=!1},h=R(l=>{V.value!=null&&(l.image=V.value),d.value=!0,axios.post(`/api/tables/${r.currentRoute.value.params.id}`,l,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{r.back(),n.add({severity:"success",summary:"Successo",detail:"Categoria criado com sucesso",life:3e3})}).catch(e=>{d.value=!1,n.add({severity:"error",summary:"Erro}",detail:`${e.response.data.message}`,life:3e3}),e.response.data.errors&&U(e.response.data.errors)}).finally(()=>{d.value=!1})}),$=async(l=1)=>{axios.get(`/api/tables/${r.currentRoute.value.params.id}/edit`,{params:{query:S.value}}).then(e=>{c.value=e.data.table,m.value=c.value.name,p.value=c.value.capacity,z.value="put",y.value=!1}).catch(e=>{y.value=!1,n.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),w()})},M=()=>{g.value=!0,axios.delete(`/api/tables/${C.value}`).then(()=>{c.value.data=c.value.data.filter(l=>l.id!==C.value),D(),n.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(l=>{n.add({severity:"error",summary:"Erro",detail:`${l}`,life:3e3}),g.value=!1}).finally(()=>{g.value=!1})},I=se(()=>{$(j.value)},300);return H(S,I),J(()=>{$()}),(l,e)=>{const B=Q,f=O,N=A,L=W;return v(),_(Y,null,[y.value?(v(),_("div",le,[a("div",oe,[a("div",ie,[o(B,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[4]||(e[4]=a("p",null,"Por Favor Aguarde...",-1))])])])):(v(),_("div",re,[a("div",ne,[a("div",ce,[a("div",de,[o(f,{label:"Voltar",class:"mr-2 mb-2",onClick:w},{default:k(()=>e[5]||(e[5]=[a("i",{class:"pi pi-angle-left"},null,-1),ee(" Voltar")])),_:1})]),e[8]||(e[8]=a("div",{class:"font-semibold text-xl"},"Mesa",-1)),e[9]||(e[9]=a("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1)),a("form",{onSubmit:e[2]||(e[2]=(...i)=>t(h)&&t(h)(...i))},[a("div",ue,[e[6]||(e[6]=a("label",{for:"name"},"Nome",-1)),o(N,{modelValue:t(m),"onUpdate:modelValue":e[0]||(e[0]=i=>F(m)?m.value=i:null),id:"name",placeholder:"Nome",class:T({"p-invalid":t(u).name}),type:"text"},null,8,["modelValue","class"]),a("small",me,E(t(u).name),1)]),a("div",pe,[e[7]||(e[7]=a("label",{for:"capacity"},"Capacidade",-1)),o(N,{modelValue:t(p),"onUpdate:modelValue":e[1]||(e[1]=i=>F(p)?p.value=i:null),id:"capacity",placeholder:"Capacidade máxima",class:T({"p-invalid":t(u).capacity}),type:"number"},null,8,["modelValue","class"]),a("small",fe,E(t(u).capacity),1)]),o(f,{label:"Submeter",class:"mr-2 mb-2",onClick:t(h),disabled:d.value},null,8,["onClick","disabled"]),d.value?(v(),K(B,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):X("",!0)],32)])])])),o(L,{header:"Confirmação",visible:b.value,"onUpdate:visible":e[3]||(e[3]=i=>b.value=i),style:{width:"350px"},modal:!0},{footer:k(()=>[o(f,{label:"Não",icon:"pi pi-times",onClick:D,class:"p-button-text"}),o(f,{label:"Sim",icon:"pi pi-check",onClick:M,class:"p-button-text",autofocus:""})]),default:k(()=>[e[10]||(e[10]=a("div",{class:"flex align-items-center justify-content-center"},[a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),a("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"])],64)}}};export{$e as default};
