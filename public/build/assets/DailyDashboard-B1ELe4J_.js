import{s as De}from"./index-B9X9_WvC.js";import{s as Te,a as Pe,b as Me}from"./index-D_04ov83.js";import{s as Ce,a as $e}from"./index-KIf69kZI.js";import{s as Ye}from"./index-DBa63n4E.js";import{s as je}from"./index-TZ4XZo8r.js";import{s as Ve}from"./index-C6v227jl.js";import{s as Re}from"./index-BQaqE99A.js";import{s as Se}from"./index-BxumVEl6.js";import{u as Ee,r as o,w as Ie,o as Fe,c as y,a,b as l,e as s,t as r,d as i,F as He,f as v,g as f,h as de,R as Ne,i as qe,j as Be,k as Ue}from"./app-Bb1GLjk7.js";import"./index.esm-CQT6nZnd.js";import{d as Ae,h as g}from"./moment-CQ1ixRO1.js";import"./index-BdRykhpU.js";import"./index-CP-7A_Yy.js";import"./index-rQgAXdpi.js";import"./index-DwxA5Dmk.js";import"./index-BsQ7VnNr.js";import"./index-Ddld6lt-.js";import"./index-Cp3wN64H.js";import"./index-CaVBa_SE.js";import"./index-DVsjm-X1.js";import"./index-AkE5VAcr.js";import"./index-DHehCSYN.js";import"./index-FPuIfBHx.js";import"./index-GYi_CWVd.js";import"./index-lAihzXdz.js";import"./index-VfL4i-YF.js";import"./index-D56Iw-mC.js";import"./index-Drb7m5wQ.js";import"./index-D6tIWDE2.js";import"./index-B1Hn1wrh.js";import"./index-I8qKAF5K.js";const Le={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},Qe={class:"w-full"},ze={class:"flex flex-col gap-4 text-center"},Ge={key:1},Ke={class:"w-full"},Oe={class:"mb-4"},We={class:"grid grid-cols-12 gap-8 mb-3"},Je={class:"col-span-12 lg:col-span-6 xl:col-span-3"},Xe={class:"card mb-0"},Ze={class:"flex justify-between mb-4"},et={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},tt={class:"col-span-12 lg:col-span-6 xl:col-span-3"},at={class:"card mb-0"},st={class:"flex justify-between mb-4"},lt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},ot={class:"col-span-12 lg:col-span-6 xl:col-span-3"},it={class:"card mb-0"},rt={class:"flex justify-between mb-4"},dt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},nt={class:"col-span-12 lg:col-span-6 xl:col-span-3"},ut={class:"card mb-0"},mt={class:"flex justify-between mb-4"},ct={class:"flex justify-between mb-4"},pt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},vt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},ft={class:"col-span-12 lg:col-span-6 xl:col-span-3"},bt={class:"card mb-0"},yt={class:"flex justify-between mb-4"},gt={class:"flex justify-between mb-4"},_t={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},ht={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},xt={class:"col-span-12 lg:col-span-6 xl:col-span-3"},wt={class:"card mb-0"},kt={class:"flex justify-between mb-4"},Dt={class:"flex justify-between mb-4"},Tt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},Pt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},Mt=["onClick"],Ct=["onClick"],$t=["src"],Yt={key:1},na={__name:"DailyDashboard",setup(jt){const w=Ue(),c=Ee();o(null);const k=o(!0);o(!1);const u=o(""),D=o(!1),T=o(!1),P=o(!1),I=o([]),F=o([]),H=o([]),N=o(0),q=o(0),B=o(0),M=o(!1);let U=o(null);const ne=o(""),A=o(null),C=o(1),$=o(1),Y=o(1),ue=o(1),m=o(100);o(0);const j=o(!1);o(null),o([]),o(0),o(0),o([]),o(!1),o(1);const V=o(!1),L=o(null);o(0);const Q=o(0),z=o(0),G=o(0),K=o(0),O=o(0),W=o(0),J=o(0),X=o(0),Z=o(0),ee=o(0);o("Aberto"),o([]);const R=o(!1),S=o(null),te=n=>{S.value=n,R.value=!0},E=o(!1);function ae(){w&&w.back()}const se=()=>{j.value=!1};function me(){const n=document.querySelector("iframe");n&&(n.contentWindow.focus(),n.contentWindow.print())}function ce(){V.value=!0,w.back()}const le=async(n=1)=>{u.value&&(u.value=u.value.toLocaleDateString("en-CA")),axios.get("/api/cashregisters/dailydashboard",{params:{date:u.value}}).then(e=>{Q.value=e.data.cash_register,z.value=e.data.total_sales,G.value=e.data.total_orders,O.value=e.data.total_tables,X.value=e.data.total_quick_sell,K.value=e.data.average_ticket,W.value=e.data.total_quick_sell_amount,J.value=e.data.total_tables_amount,Z.value=e.data.total_payments,ee.value=e.data.total_payments_amount,k.value=!1}).catch(e=>{k.value=!1,c.add({severity:"error",summary:"Erro",detail:`${e.response.data.message}`,life:3e3}),ae()})},oe=async(n=1)=>{axios.get(`/api/daily/paymentreport?page=${n}`,{params:{date:u.value}}).then(e=>{H.value=e.data,B.value=e.data.total,D.value=!1}).catch(e=>{D.value=!1,c.add({severity:"error",summary:"Erro",detail:`${e.response.data.message}`,life:3e3})})},ie=async(n=1)=>{axios.get(`/api/daily/tablesellreport?page=${n}`,{params:{date:u.value}}).then(e=>{F.value=e.data,q.value=e.data.total,P.value=!1}).catch(e=>{P.value=!1,c.add({severity:"error",summary:"Erro",detail:`${e.response.data.message}`,life:3e3})})},re=async(n=1)=>{axios.get(`/api/daily/quicksellreport?page=${n}`,{params:{date:u.value}}).then(e=>{I.value=e.data,N.value=e.data.total,T.value=!1}).catch(e=>{T.value=!1,c.add({severity:"error",summary:"Erro",detail:`${e.response.data.message}`,life:3e3})})},pe=()=>{M.value=!0,axios.delete(`/api/tables/${U.value}`).then(()=>{A.value.data=A.value.data.filter(n=>n.id!==U.value),se(),c.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(n=>{c.add({severity:"error",summary:"Erro",detail:`${n}`,life:3e3}),M.value=!1}).finally(()=>{M.value=!1})},ve=n=>{C.value=n.page+1,m.value=n.rows,re(C.value)},fe=n=>{$.value=n.page+1,m.value=n.rows,ie($.value)},be=n=>{Y.value=n.page+1,m.value=n.rows,oe(Y.value)},ye=Ae(()=>{le(ue.value)},300);return Ie(ne,ye),Fe(()=>{le(),oe(),re(),ie()}),(n,e)=>{const ge=Se,p=Re,_e=Ve,_=Pe,he=Me,d=je,b=Ye,h=Ce,xe=$e,we=Te,x=De;return v(),y(He,null,[k.value?(v(),y("div",Le,[a("div",Qe,[a("div",ze,[l(ge,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[6]||(e[6]=a("p",null,"Por Favor Aguarde...",-1))])])])):(v(),y("div",Ge,[a("div",Ke,[l(p,{label:"Voltar",class:"mr-2 mb-2",onClick:ae},{default:s(()=>e[7]||(e[7]=[a("i",{class:"pi pi-angle-left"},null,-1),i(" Voltar")])),_:1}),a("div",Oe,[e[8]||(e[8]=a("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Selecione a Data:",-1)),l(_e,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),dateFormat:"yy-mm-dd",showIcon:"",class:"mt-1",placeholder:"Escolha uma data"},null,8,["modelValue"])])]),a("div",We,[a("div",Je,[a("div",Xe,[a("div",Ze,[a("div",null,[e[9]||(e[9]=a("span",{class:"block text-muted-color font-medium mb-4"},"Total de Vendas",-1)),a("div",et,r(z.value)+" MT",1)]),e[10]||(e[10]=a("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[a("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),a("div",tt,[a("div",at,[a("div",st,[a("div",null,[e[11]||(e[11]=a("span",{class:"block text-muted-color font-medium mb-4"},"Pedidos",-1)),a("div",lt,r(G.value),1)]),e[12]||(e[12]=a("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[a("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),a("div",ot,[a("div",it,[a("div",rt,[a("div",null,[e[13]||(e[13]=a("span",{class:"block text-muted-color font-medium mb-4"},"Ticket Médio",-1)),a("div",dt,r(K.value)+" MT",1)]),e[14]||(e[14]=a("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[a("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),a("div",nt,[a("div",ut,[a("div",mt,[a("div",null,[e[15]||(e[15]=a("span",{class:"block text-muted-color font-medium mb-4"},"Total Mesas Abertas",-1)),a("div",ct,[a("span",pt,r(O.value),1),a("span",vt,r(J.value)+" MT",1)])]),e[16]||(e[16]=a("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[a("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),a("div",ft,[a("div",bt,[a("div",yt,[a("div",null,[e[17]||(e[17]=a("span",{class:"block text-muted-color font-medium mb-4"},"Total Pedidos/Venda Rápido",-1)),a("div",gt,[a("span",_t,r(X.value),1),a("span",ht,r(W.value)+" MT",1)])]),e[18]||(e[18]=a("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[a("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),a("div",xt,[a("div",wt,[a("div",kt,[a("div",null,[e[20]||(e[20]=a("span",{class:"block text-muted-color font-medium mb-4"},"Total Pagamentos",-1)),a("div",Dt,[a("span",Tt,r(Z.value),1),e[19]||(e[19]=i(" - - ")),a("span",Pt,r(ee.value)+" MT",1)])]),e[21]||(e[21]=a("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[a("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])])]),l(we,{value:"0"},{default:s(()=>[l(he,null,{default:s(()=>[l(_,{value:"0"},{default:s(()=>e[22]||(e[22]=[i("Vendas Rápidas")])),_:1}),l(_,{value:"1"},{default:s(()=>e[23]||(e[23]=[i("Vendas em Mesas")])),_:1}),l(_,{value:"2"},{default:s(()=>e[24]||(e[24]=[i("Pagamentos Efetuados")])),_:1}),l(_,{value:"3"},{default:s(()=>e[25]||(e[25]=[i("Caixas")])),_:1})]),_:1}),l(xe,null,{default:s(()=>[l(h,{value:"0"},{default:s(()=>[l(b,{value:I.value.data,paginator:!0,rows:m.value,totalRecords:N.value,dataKey:"id",lazy:!0,rowHover:!0,loading:T.value,first:(C.value-1)*m.value,onPage:ve,showGridlines:""},{header:s(()=>e[26]||(e[26]=[])),empty:s(()=>e[27]||(e[27]=[i("Nenhuma registro encontrado. ")])),loading:s(()=>e[28]||(e[28]=[i(" Carregando, por favor espere. ")])),default:s(()=>[l(d,{header:"ID",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(" #"+r(t.id),1)]),_:1}),l(d,{header:"Pedido",style:{"min-width":"12rem"}},{body:s(({data:t})=>e[29]||(e[29]=[i(" Pedido Rápido ")])),_:1}),l(d,{header:"Garçom",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(r(t.user.name),1)]),_:1}),l(d,{header:"Estado",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(r(t.status.name),1)]),_:1}),l(d,{header:"Itens",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(r(t.itens.length),1)]),_:1}),l(d,{header:"Valor",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(r(t.total)+" MT ",1)]),_:1}),l(d,{header:"Data",dataType:"date",style:{"min-width":"10rem"}},{body:s(({data:t})=>[i(r(f(g)(t.created_at).format("DD-MM-YYYY H:mm")),1)]),_:1}),l(d,{header:"Ações",style:{"min-width":"12rem"}},{body:s(({data:t})=>[a("a",{class:"m-3",href:"#",onClick:de(ke=>te(t),["prevent"])},e[30]||(e[30]=[a("i",{class:"pi pi-eye"},null,-1)]),8,Mt)]),_:1})]),_:1},8,["value","rows","totalRecords","loading","first"])]),_:1}),l(h,{value:"1"},{default:s(()=>[l(b,{value:F.value.data,paginator:!0,rows:m.value,totalRecords:q.value,dataKey:"id",lazy:!0,rowHover:!0,loading:P.value,first:($.value-1)*m.value,onPage:fe,showGridlines:""},{header:s(()=>e[31]||(e[31]=[])),empty:s(()=>e[32]||(e[32]=[i("Nenhuma registro encontrado. ")])),loading:s(()=>e[33]||(e[33]=[i(" Carregando, por favor espere. ")])),default:s(()=>[l(d,{header:"ID",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(" #"+r(t.id),1)]),_:1}),l(d,{header:"Pedido",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(r(t.table.name),1)]),_:1}),l(d,{header:"Garçom",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(r(t.user.name),1)]),_:1}),l(d,{header:"Estado",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(r(t.status.name),1)]),_:1}),l(d,{header:"Itens",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(r(t.itens.length),1)]),_:1}),l(d,{header:"Valor",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(r(t.total)+" MT ",1)]),_:1}),l(d,{header:"Data",dataType:"date",style:{"min-width":"10rem"}},{body:s(({data:t})=>[i(r(f(g)(t.created_at).format("DD-MM-YYYY H:mm")),1)]),_:1}),l(d,{header:"Ações",style:{"min-width":"12rem"}},{body:s(({data:t})=>[a("a",{class:"m-3",href:"#",onClick:de(ke=>te(t),["prevent"])},e[34]||(e[34]=[a("i",{class:"pi pi-eye"},null,-1)]),8,Ct)]),_:1})]),_:1},8,["value","rows","totalRecords","loading","first"])]),_:1}),l(h,{value:"2"},{default:s(()=>[l(b,{value:H.value.data,paginator:!0,rows:m.value,totalRecords:B.value,dataKey:"id",lazy:!0,rowHover:!0,loading:D.value,first:(Y.value-1)*m.value,onPage:be,showGridlines:""},{header:s(()=>e[35]||(e[35]=[])),empty:s(()=>e[36]||(e[36]=[i("Nenhuma registro encontrado. ")])),loading:s(()=>e[37]||(e[37]=[i(" Carregando, por favor espere. ")])),default:s(()=>[l(d,{header:"ID",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(r(t.id),1)]),_:1}),l(d,{header:"Venda",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(" #"+r(t.order_id),1)]),_:1}),l(d,{header:"Pedido",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(r(t.order.table_id==null?"Pedido Rápido":t.order.table.name),1)]),_:1}),l(d,{header:"Metodo de Pagamento",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(r(t.method.name),1)]),_:1}),l(d,{header:"Valor",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(r(t.amount)+" MT ",1)]),_:1}),l(d,{header:"Data",dataType:"date",style:{"min-width":"10rem"}},{body:s(({data:t})=>[i(r(f(g)(t.created_at).format("DD-MM-YYYY H:mm")),1)]),_:1})]),_:1},8,["value","rows","totalRecords","loading","first"])]),_:1}),l(h,{value:"3"},{default:s(()=>[l(b,{value:Q.value,paginator:!0,rows:15,dataKey:"id",lazy:!1,rowHover:!0,showGridlines:""},{header:s(()=>e[38]||(e[38]=[])),empty:s(()=>e[39]||(e[39]=[i("Nenhuma registro encontrado. ")])),loading:s(()=>e[40]||(e[40]=[i(" Carregando, por favor espere. ")])),default:s(()=>[l(d,{header:"ID",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(" #"+r(t.id),1)]),_:1}),l(d,{header:"Usuário",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(r(t.user.name),1)]),_:1}),l(d,{header:"Valor",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(r(t.order_itens_total)+" MT ",1)]),_:1}),l(d,{header:"Valor Final Declarado",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(r(t.closing_balance)+" MT ",1)]),_:1}),l(d,{header:"Estado",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(r(t.status.name),1)]),_:1}),l(d,{header:"Abertura",dataType:"date",style:{"min-width":"10rem"}},{body:s(({data:t})=>[i(r(f(g)(t.opened_at).format("DD-MM-YYYY H:mm")),1)]),_:1}),l(d,{header:"Fechado as",dataType:"date",style:{"min-width":"10rem"}},{body:s(({data:t})=>[i(r(t.closed_at?f(g)(t.closed_at).format("DD-MM-YYYY H:mm"):"-"),1)]),_:1}),l(d,{header:"Ações",style:{"min-width":"12rem"}},{body:s(({data:t})=>[l(f(Ne),{class:"m-3",to:"/admin/cashregisters/"+t.id},{default:s(()=>e[41]||(e[41]=[a("i",{class:"pi pi-eye"},null,-1)])),_:2},1032,["to"])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})])),l(x,{header:"Confirmação",visible:j.value,"onUpdate:visible":e[1]||(e[1]=t=>j.value=t),style:{width:"350px"},modal:!0},{footer:s(()=>[l(p,{label:"Não",icon:"pi pi-times",onClick:se,class:"p-button-text"}),l(p,{label:"Sim",icon:"pi pi-check",onClick:pe,class:"p-button-text",autofocus:""})]),default:s(()=>[e[42]||(e[42]=a("div",{class:"flex align-items-center justify-content-center"},[a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),a("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"]),l(x,{header:"Open File",visible:E.value,"onUpdate:visible":e[3]||(e[3]=t=>E.value=t),style:{width:"30vw"}},{default:s(()=>[e[43]||(e[43]=a("p",null,"Here you can manage your files or perform specific actions.",-1)),l(p,{label:"Close",onClick:e[2]||(e[2]=t=>E.value=!1)})]),_:1},8,["visible"]),l(x,{visible:V.value,"onUpdate:visible":e[4]||(e[4]=t=>V.value=t),header:"Recibo",modal:!0,style:{width:"600px"},closable:!1},{footer:s(()=>[l(p,{label:"Imprimir",icon:"pi pi-print",onClick:me}),l(p,{label:"Fechar",icon:"pi pi-times",class:"p-button-text",onClick:ce})]),default:s(()=>[L.value?(v(),y("iframe",{key:0,src:L.value,style:{width:"100%",height:"500px"},frameborder:"0"},null,8,$t)):qe("",!0)]),_:1},8,["visible"]),l(x,{visible:R.value,"onUpdate:visible":e[5]||(e[5]=t=>R.value=t),header:"Itens do Pedido #",modal:!0,style:{width:"50vw"}},{default:s(()=>[S.value?(v(),Be(b,{key:0,value:S.value.itens,responsiveLayout:"scroll"},{default:s(()=>[l(d,{header:"Produto",style:{"min-width":"12rem"}},{body:s(({data:t})=>[i(r(t.product.name),1)]),_:1}),l(d,{header:"Quantidade",style:{"min-width":"8rem"}},{body:s(({data:t})=>[i(r(t.quantity),1)]),_:1}),l(d,{header:"Preço Unitário",style:{"min-width":"8rem"}},{body:s(({data:t})=>[i(r(t.price)+" MT",1)]),_:1}),l(d,{header:"Total",style:{"min-width":"8rem"}},{body:s(({data:t})=>[i(r(t.total)+" MT",1)]),_:1})]),_:1},8,["value"])):(v(),y("p",Yt,"Nenhum item encontrado para este pedido."))]),_:1},8,["visible"])],64)}}};export{na as default};
