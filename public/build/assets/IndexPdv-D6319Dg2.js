import{s as A}from"./index-BVhdwYF6.js";import{s as L}from"./index-BGkz5PfW.js";import{s as Q}from"./index-BkBcl6jt.js";import{s as T}from"./index-DRlvieUk.js";import{u as W,r as l,w as G,o as J,aQ as K,c as d,a as e,b as o,t as a,e as f,F as x,f as c,a5 as w,n as y,g as k,k as O}from"./app-BTf9-ai_.js";import{d as X,h as C}from"./moment-CQ1ixRO1.js";import"./index-C0ODo9Cv.js";import"./index-CQKq0pW0.js";import"./index-7YR6PSei.js";import"./index-BFN9GocW.js";import"./index-CxUVlT2R.js";import"./index-CFeuG2SP.js";import"./index-B136gTNq.js";import"./index-B8j82Sw8.js";import"./index-DJmDEk1T.js";import"./index-BYhaYc51.js";import"./index-Bq4RKSB8.js";import"./index-DY3rV8CR.js";const Z={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},ee={class:"w-full"},te={class:"flex flex-col gap-4 text-center"},se={key:1},ae={class:"grid grid-cols-12 gap-4"},le={class:"card col-span-12 lg:col-span-6 xl:col-span-3"},oe={class:"font-semibold text-xl"},ie={class:"flex flex-col"},re={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},ne={class:"flex flex-row md:flex-col justify-between items-start gap-2"},de={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},ce={class:"text-lg font-medium mt-2"},ue={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},fe={class:"flex flex-col md:items-end gap-8"},me={class:"flex flex-row-reverse md:flex-row gap-2"},pe={class:"card col-span-12 lg:col-span-6 xl:col-span-3"},xe={class:"font-semibold text-xl"},ve={class:"flex flex-col"},_e={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},ge={class:"flex flex-row md:flex-col justify-between items-start gap-2"},he={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},be={class:"text-lg font-medium mt-2"},we={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},ye={class:"flex flex-col md:items-end gap-8"},ke={class:"flex flex-row-reverse md:flex-row gap-2"},Ce={class:"card col-span-12 lg:col-span-6 xl:col-span-3"},De={class:"font-semibold text-xl"},Ye={class:"flex flex-col"},Pe={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},je={class:"flex flex-row md:flex-col justify-between items-start gap-2"},$e={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},Me={class:"text-lg font-medium mt-2"},Se={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},Be={class:"flex flex-col md:items-end gap-8"},Re={class:"flex flex-row-reverse md:flex-row gap-2"},Ee={class:"card col-span-12 lg:col-span-6 xl:col-span-3"},Fe={class:"font-semibold text-xl"},He={class:"flex flex-col"},Ie={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},Ue={class:"flex flex-row md:flex-col justify-between items-start gap-2"},qe={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},ze={class:"text-lg font-medium mt-2"},Ne={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},rt={__name:"IndexPdv",setup(Ve){const $=O(),D=W();l(null);const Y=l(!0),m=l(!1);let M=l(null);const S=l("");l(null);const I=l(1);l(15);const U=l(0),B=l(!1),p=l(!1);let R;const v=l([]),_=l([]),g=l([]),h=l([]);l(null),l(null),l(null);function q(){$&&$.back()}const E=()=>{p.value=!1},P=i=>{p.value=!0,M.value=i},j=async(i=1)=>{axios.get(`/api/pdvkitchen?page=${i}`,{params:{query:S.value}}).then(s=>{v.value=s.data.order_itens_pending,_.value=s.data.order_itens_getting_ready,g.value=s.data.order_itens_ready,h.value=s.data.order_itens_delivered,U.value=s.data.total,Y.value=!1}).catch(s=>{Y.value=!1,D.add({severity:"error",summary:`${s}`,detail:"Message Detail",life:3e3}),q()})},z=()=>{m.value=!0,axios.get(`/api/changestatus/${M.value}`).then(i=>{v.value=i.data.order_itens_pending,_.value=i.data.order_itens_getting_ready,g.value=i.data.order_itens_ready,h.value=i.data.order_itens_delivered,m.value=!1,E(),D.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao transitar o estado.",life:3e3})}).catch(i=>{D.add({severity:"error",summary:"Erro",detail:`${i}`,life:3e3}),m.value=!1}).finally(()=>{m.value=!1})},N=X(()=>{j(I.value)},300);return G(S,N),J(()=>{j(),R=setInterval(()=>{j()},3e4)}),K(()=>{clearInterval(R)}),(i,s)=>{const V=T,u=Q,b=L,F=A;return c(),d(x,null,[Y.value?(c(),d("div",Z,[e("div",ee,[e("div",te,[o(V,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),s[3]||(s[3]=e("p",null,"Por Favor Aguarde...",-1))])])])):(c(),d("div",se,[e("div",ae,[e("div",le,[e("div",oe,"Pendentes("+a(v.value.length)+")",1),o(b,{value:v.value,paginator:"",rows:50,layout:"list"},{list:f(r=>[e("div",ie,[(c(!0),d(x,null,w(r.items,(t,n)=>(c(),d("div",{key:n},[e("div",{class:y(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface":n!==0}])},[e("div",re,[e("div",ne,[e("div",null,[e("span",de,a(t.order.table?t.order.table.name:"Pedido Rápido")+" | #"+a(t.order.id),1),e("div",ce,a(t.quantity)+" * "+a(t.product.name),1),e("span",ue,a(k(C)(t.created_at).format("DD-MM-YYYY H:mm")),1)])]),e("div",fe,[e("div",me,[o(u,{onClick:H=>P(t.id),icon:"pi pi-check",class:"flex-auto md:flex-initial whitespace-nowrap"},null,8,["onClick"])])])])],2)]))),128))])]),_:1},8,["value"])]),e("div",pe,[e("div",xe,"Preparando("+a(_.value.length)+")",1),o(b,{value:_.value,paginator:"",rows:50,layout:"list"},{list:f(r=>[e("div",ve,[(c(!0),d(x,null,w(r.items,(t,n)=>(c(),d("div",{key:n},[e("div",{class:y(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface":n!==0}])},[e("div",_e,[e("div",ge,[e("div",null,[e("span",he,a(t.order.table?t.order.table.name:"Pedido Rápido")+" | #"+a(t.order.id),1),e("div",be,a(t.product.name),1),e("span",we,a(k(C)(t.created_at).format("DD-MM-YYYY H:mm")),1)])]),e("div",ye,[e("div",ke,[o(u,{onClick:H=>P(t.id),icon:"pi pi-check",class:"flex-auto md:flex-initial whitespace-nowrap"},null,8,["onClick"])])])])],2)]))),128))])]),_:1},8,["value"])]),e("div",Ce,[e("div",De,"Pronto("+a(g.value.length)+")",1),o(b,{value:g.value,paginator:"",rows:50,layout:"list"},{list:f(r=>[e("div",Ye,[(c(!0),d(x,null,w(r.items,(t,n)=>(c(),d("div",{key:n},[e("div",{class:y(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface":n!==0}])},[e("div",Pe,[e("div",je,[e("div",null,[e("span",$e,a(t.order.table?t.order.table.name:"Pedido Rápido")+" | #"+a(t.order.id),1),e("div",Me,a(t.product.name),1),e("span",Se,a(k(C)(t.created_at).format("DD-MM-YYYY H:mm")),1)])]),e("div",Be,[e("div",Re,[o(u,{onClick:H=>P(t.id),icon:"pi pi-check",class:"flex-auto md:flex-initial whitespace-nowrap"},null,8,["onClick"])])])])],2)]))),128))])]),_:1},8,["value"])]),e("div",Ee,[e("div",Fe,"Entregue("+a(h.value.length)+")",1),o(b,{value:h.value,paginator:"",rows:50,layout:"list"},{list:f(r=>[e("div",He,[(c(!0),d(x,null,w(r.items,(t,n)=>(c(),d("div",{key:n},[e("div",{class:y(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface":n!==0}])},[e("div",Ie,[e("div",Ue,[e("div",null,[e("span",qe,a(t.order.table?t.order.table.name:"Pedido Rápido")+" | #"+a(t.order.id),1),e("div",ze,a(t.product.name),1),e("span",Ne,a(k(C)(t.created_at).format("DD-MM-YYYY H:mm")),1)])]),s[4]||(s[4]=e("div",{class:"flex flex-col md:items-end gap-8"},null,-1))])],2)]))),128))])]),_:1},8,["value"])])])])),o(F,{header:"Confirmação",visible:B.value,"onUpdate:visible":s[0]||(s[0]=r=>B.value=r),style:{width:"350px"},modal:!0},{footer:f(()=>[o(u,{label:"Não",icon:"pi pi-times",onClick:E,class:"p-button-text"}),o(u,{label:"Sim",icon:"pi pi-check",onClick:i.deleteData,class:"p-button-text",autofocus:""},null,8,["onClick"])]),default:f(()=>[s[5]||(s[5]=e("div",{class:"flex align-items-center justify-content-center"},[e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),e("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"]),o(F,{header:"Deseja avançar o pedido para o próximo estado?",visible:p.value,"onUpdate:visible":s[2]||(s[2]=r=>p.value=r),style:{width:"30vw"}},{default:f(()=>[s[6]||(s[6]=e("p",null,"Ao clicar em avançar, seu pedido será adicionado em outra tabela de referência.",-1)),o(u,{class:"m-4",label:"Fechar",severity:"danger",onClick:s[1]||(s[1]=r=>p.value=!1)}),o(u,{class:"m-4",label:"Proximo Estado",disabled:m.value==!0,onClick:z},null,8,["disabled"])]),_:1},8,["visible"])],64)}}};export{rt as default};
